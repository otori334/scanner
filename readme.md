# これは何

- 書類の画像ファイルを整形するスクリプト
- シェルスクリプトのファイル操作に慣れてるからこうなった（習作）
- 環境：mac 11.4, Python 3.9.4

## 圧縮

- コントラストの強い白黒画像を許容する用途に使える
- 圧縮率は2%未満（8.7 MB の画像ファイル１つが137 KB ）になる
- 大津の二値化後pngで保存しその後普通の二値化をしてpngで保存すると一番軽い
  - 逆に容量が大きくなる組み合わせがあった
    - 最後にjpgで保存すると10倍
    - pngを経由しないと2倍
    - 大津の二値化を2回繰り返すと3倍
  - 解像度は組み合わせを変えても変化しない
- 書き込みはpdf化してからがいい
  - フラット化するがよろし

## 台形補正

- 指定した点の再指定ができる
- 四点を射影変換に適した順に指定する必要がある
  - 改善の余地がある
- 台形補正は半自動
  - [輪郭検出](https://qiita.com/tyaunuakkia/items/3ff24ee7c5cc2eda3b37)を試したが，黒背景などの撮影環境・パラメータの決定が面倒

## 罫線除去

- モルフォロジー変換を用いて実用可能な罫線除去ツールを実装した
  - グラフなどの横線と罫線を線の太さで区別する
  - 現時点では罫線と同程度に細い横線を除去してしまう
    - ハフ変換を補助的に用いて解決できそう

## 今後

- 輪郭・パターン検出を試したい
  - モルフォロジー変換で除去できない大きさのノイズの除去を自動化できるかもしれない
- 今のシェルスクリプトを使う方法だとバッチ操作がやりづらいからMakefileに置き換えたい
- 台形補正のテニスコート領域のマーカーをもっと見やすくしたい
- Pythonの作法に則った形に改めたい
